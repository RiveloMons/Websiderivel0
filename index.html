<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rivelo Mons Pro</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Arial',sans-serif;transition:all .3s}
body{background:#000;color:#fff}
.menu{position:fixed;top:15px;left:15px;z-index:1000;cursor:pointer}
.menu div{width:32px;height:3px;background:#fff;margin:7px 0;transition:.3s}
.sidebar{position:fixed;left:-280px;top:0;width:260px;height:100%;background:#111;border-right:2px solid #fff;padding:40px 20px;transition:.4s;z-index:999}
.sidebar a{display:block;color:#fff;text-decoration:none;margin:25px 0;font-size:18px;border-bottom:1px solid #fff;padding-bottom:8px;transition:.3s}
.sidebar a:hover{color:#ff0}
.sidebar.active{left:0}
.section{display:none;padding:90px 20px;min-height:100vh}
.activeSection{display:block}
.portada img{width:100%;max-height:90vh;object-fit:cover;border-bottom:2px solid #fff;border-radius:6px}
#searchBar{margin:20px 0;padding:10px;width:100%;max-width:400px;border-radius:6px;border:2px solid #fff;background:#111;color:#fff}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:20px;margin-top:20px}
.card{border:2px solid #fff;padding:15px;text-align:center;border-radius:8px;transition:.3s;background:#111;position:relative}
.card:hover{transform:scale(1.05)}
.card img{width:100%;height:140px;object-fit:contain;background:#fff;border-radius:6px}
.card h3{margin:10px 0;font-size:16px}
.card p{margin:5px 0;font-size:14px;color:#ff0}
.card button{margin-top:10px;padding:12px;border:none;background:#fff;color:#000;font-weight:bold;cursor:pointer;width:100%;font-size:14px;transition:.2s}
.card button:hover{background:#ff0}
.packDetail{text-align:center;max-width:800px;margin:auto}
.packDetail img{width:250px;background:#fff;border-radius:10px;margin:20px 0}
.bigBtn{padding:18px;margin:12px 0;width:100%;font-size:18px;font-weight:bold;border:none;background:#fff;color:#000;cursor:pointer;transition:.2s}
.bigBtn:hover{background:#ff0}
.cartItem{border:1px solid #fff;margin:15px 0;padding:15px;border-radius:8px;background:#111}
.flex{display:flex;gap:10px;flex-wrap:wrap}
.cartItem button{padding:12px;border:none;background:#fff;color:#000;font-weight:bold;width:48%;cursor:pointer;transition:.2s}
.cartItem button:hover{background:#ff0}
#adminPanel{display:none;margin-top:30px;padding:20px;border:2px solid #fff;border-radius:8px;background:#111}
#adminPanel input, #adminPanel button, #adminPanel select{margin:6px 0;padding:10px;width:100%;border:none;border-radius:6px}
#adminPanel button{background:#fff;color:#000;font-weight:bold;cursor:pointer;transition:.2s}
#adminPanel button:hover{background:#ff0}
#rouletteSection{display:none;text-align:center;margin:40px 0}
#rouletteCanvas{border:2px solid #fff;border-radius:50%;background:#111;display:block;margin:0 auto}
.spinBtn{padding:18px;margin:20px 0;width:200px;font-size:16px;font-weight:bold;border:none;background:#ff0;color:#000;cursor:pointer;border-radius:6px;transition:.2s}
.spinBtn:hover{background:#fff}
#reviews{margin-top:40px}
.review{border:1px solid #fff;padding:10px;margin:10px 0;border-radius:6px;background:#111}
.review h4{margin-bottom:5px}
.review p{font-size:14px;color:#ff0}
#infoTexts{margin:40px 0;padding:20px;border-top:2px solid #fff;border-bottom:2px solid #fff}
#infoTexts p{margin:10px 0;line-height:1.5;}
footer{margin-top:60px;padding:30px 10px;border-top:2px solid #fff;text-align:center;font-size:14px}
footer a{color:#fff;text-decoration:none;margin:0 10px;transition:.2s}
footer a:hover{color:#ff0}
@media(max-width:768px){.grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:480px){.grid{grid-template-columns:repeat(2,1fr)}; .cartItem button{width:100%}}
</style>
</head>
<body>

<div class="menu" onclick="toggleMenu()"><div></div><div></div><div></div></div>

<div class="sidebar" id="sidebar">
<a onclick="go('inicio')">Inicio</a>
<a onclick="go('catalogo')">Catálogo</a>
<a onclick="go('carrito')">Carrito</a>
<a onclick="go('rouletteSection')">Ruleta de descuentos</a>
<a onclick="go('admin')">Administrador</a>
</div>

<div id="inicio" class="section activeSection portada">
<img id="portadaImg" src="portada.jpg" alt="Portada">
</div>

<div id="catalogo" class="section">
<h2>Catálogo</h2>
<input type="text" id="searchBar" placeholder="Buscar pack...">
<div class="grid" id="packsGrid"></div>
</div>

<div id="detalle" class="section">
<div class="packDetail" id="packDetail"></div>
</div>

<div id="carrito" class="section">
<h2>Tu carrito</h2>
<div id="cartItems"></div>
</div>

<div id="rouletteSection" class="section">
<h2>¡Gira la ruleta y gana tu descuento!</h2>
<canvas id="rouletteCanvas" width="400" height="400"></canvas>
<button class="spinBtn" id="spinBtn">Girar</button>
<p id="rouletteResult"></p>
</div>

<div id="admin" class="section">
<h2>Panel Administrador</h2>
<p>Introduce la contraseña para editar:</p>
<input type="password" id="adminPass" placeholder="Contraseña">
<button onclick="loginAdmin()">Entrar</button>

<div id="adminPanel">
<h3>Editar Packs, Portada y Ruleta</h3>
<label>Imagen de inicio/portada:</label>
<input type="text" id="portadaInput" placeholder="URL imagen portada">
<button onclick="savePortada()">Guardar portada</button>
<div id="adminPacks"></div>
<h4>Descuentos de la ruleta (%)</h4>
<input type="text" id="rouletteInput" placeholder="Ej: 5,10,15,20">
<button onclick="saveRoulette()">Guardar ruleta</button>
<button onclick="addNewPack()">Añadir nuevo pack</button>
</div>
</div>

<div id="reviews" class="section">
<h2>Valoraciones de nuestros clientes</h2>
<div id="reviewsList"></div>
</div>

<div id="infoTexts" class="section">
<h2>Sobre Rivelo Mons Pro</h2>
<p>Somos tu tienda de confianza para obtener proveedores de calidad y comenzar tu negocio de reventa con seguridad.</p>
<p>Accede a packs exclusivos, descuentos especiales y soporte personalizado para ayudarte a crecer.</p>
<p>Todos nuestros proveedores están verificados y ofrecemos atención 24/7 para cualquier consulta.</p>
</div>

<footer>
Síguenos en redes:<br><br>
<a href="https://instagram.com/riveloms" target="_blank">Instagram</a> |
<a href="https://tiktok.com/@rivelo_ms" target="_blank">TikTok</a>
</footer>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<!-- EMAILJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
emailjs.init("TU_USER_ID_EMAILJS"); // <- Cambia esto por tu userID de EmailJS

const firebaseConfig = {
apiKey: "AIzaSyBJuvF20LdUjwAZQemybfrYA11zn05wbgY",
authDomain: "rivelo-7d649.firebaseapp.com",
databaseURL: "https://rivelo-7d649-default-rtdb.firebaseio.com",
projectId: "rivelo-7d649",
storageBucket: "rivelo-7d649.appspot.com",
messagingSenderId: "275278553118",
appId: "1:275278553118:web:4289e3eace262b43640e0f"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let packs=[], cart=[], rouletteValues=[5,10,15,20];
let userEmail="", firstPurchaseDone=false;

// MENU
function toggleMenu(){document.getElementById("sidebar").classList.toggle("active")}
function go(id){document.querySelectorAll('.section').forEach(s=>s.classList.remove('activeSection')); document.getElementById(id).classList.add('activeSection'); document.getElementById("sidebar").classList.remove("active")}

// BUSCADOR
document.getElementById("searchBar")?.addEventListener("input",e=>{
const val=e.target.value.toLowerCase(); document.querySelectorAll(".card").forEach(c=>{ c.style.display = c.querySelector("h3").innerText.toLowerCase().includes(val)? "block":"none"; })});

// FUNCIONES DE ADMIN, PACKS, CARRITO Y RUEDA (igual que antes) ...

// FUNCION EMAIL CON EMAILJS
function sendEmailNotification(){
if(!userEmail) return;
emailjs.send("TU_SERVICE_ID","TU_TEMPLATE_ID",{user_email:userEmail}).then(r=>{alert("Correo enviado a administrador");},e=>{console.error(e);});
}

// EJEMPLO: para probar, asigna userEmail antes de enableRouletteIfEligible
function enableRouletteIfEligible(){
if(firstPurchaseDone && userEmail){
go("rouletteSection");
sendEmailNotification();
}

// código de la ruleta sigue igual que antes...
}
</script>
</body>
</html>
