<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rivelo Mons Pro</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Arial',sans-serif;transition:all .3s}
body{background:#000;color:#fff}
/* Menu */
.menu{position:fixed;top:15px;left:15px;z-index:1000;cursor:pointer}
.menu div{width:32px;height:3px;background:#fff;margin:7px 0}
/* Sidebar */
.sidebar{position:fixed;left:-280px;top:0;width:260px;height:100%;background:#111;border-right:2px solid #fff;padding:40px 20px;transition:.4s;z-index:999}
.sidebar a{display:block;color:#fff;text-decoration:none;margin:25px 0;font-size:18px;border-bottom:1px solid #fff;padding-bottom:8px}
.sidebar a:hover{color:#ff0}
.sidebar.active{left:0}
/* Sections */
.section{display:none;padding:90px 20px;min-height:100vh}
.activeSection{display:block}
/* Portada */
.portada img{width:100%;max-height:90vh;object-fit:cover;border-radius:6px}
/* Grid */
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:20px;margin-top:40px}
.card{border:2px solid #fff;padding:15px;text-align:center;border-radius:8px;background:#111}
.card:hover{transform:scale(1.05)}
.card img{width:100%;height:140px;object-fit:contain;background:#fff;border-radius:6px}
.card h3{margin:10px 0;font-size:16px}
.card p{margin:5px 0;font-size:14px;color:#ff0}
/* Buttons */
button{padding:12px;font-weight:bold;border:none;cursor:pointer}
button:hover{background:#ff0;color:#000}
.bigBtn{padding:18px;width:100%}
/* Cart */
.cartItem{border:1px solid #fff;margin:15px 0;padding:15px;border-radius:8px;background:#111}
.flex{display:flex;gap:10px;flex-wrap:wrap}
/* Admin */
#adminPanel{display:none;margin-top:30px;padding:20px;border:2px solid #fff;border-radius:8px;background:#111}
/* Footer */
footer{margin-top:60px;padding:30px 10px;border-top:2px solid #fff;text-align:center}
footer a{margin:0 10px;color:#fff;text-decoration:none}
footer a:hover{color:#ff0}
/* Responsive */
@media(max-width:768px){.grid{grid-template-columns:repeat(2,1fr)}}
</style>
</head>
<body>

<div class="menu" onclick="toggleMenu()"><div></div><div></div><div></div></div>
<div class="sidebar" id="sidebar">
  <a onclick="go('inicio')">Inicio</a>
  <a onclick="go('catalogo')">Catálogo</a>
  <a onclick="go('carrito')">Carrito</a>
  <a onclick="go('admin')">Administrador</a>
</div>

<div id="inicio" class="section activeSection">
  <img id="portadaImg" src="portada.jpg" alt="Portada">
</div>

<div id="catalogo" class="section">
  <h2>Catálogo</h2>
  <div class="grid" id="packsGrid"></div>
</div>

<div id="detalle" class="section"><div class="packDetail" id="packDetail"></div></div>
<div id="carrito" class="section"><h2>Tu carrito</h2><div id="cartItems"></div></div>

<div id="admin" class="section">
  <h2>Administrador</h2>
  <p>Contraseña:</p><input type="password" id="adminPass">
  <button onclick="loginAdmin()">Entrar</button>

  <div id="adminPanel">
    <h3>Editar Packs y Portada</h3>
    <label>Portada URL:</label>
    <input type="text" id="portadaInput">
    <button onclick="savePortada()">Guardar Portada</button>
    <div id="adminPacks"></div>
    <button onclick="addNewPack()">Añadir Pack</button>
  </div>
</div>

<footer>
Síguenos:<br>
<a href="https://instagram.com/riveloms" target="_blank">Instagram</a> |
<a href="https://tiktok.com/@rivelo_ms" target="_blank">TikTok</a>
</footer>

<!-- Firebase scripts -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyBJuvF20LdUjwAZQemybfrYA11zn05wbgY",
  authDomain: "rivelo-7d649.firebaseapp.com",
  databaseURL: "https://rivelo-7d649-default-rtdb.firebaseio.com",
  projectId: "rivelo-7d649",
  storageBucket: "rivelo-7d649.appspot.com",
  messagingSenderId: "275278553118",
  appId: "1:275278553118:web:4289e3eace262b43640e0f"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
</script>

<script>
const adminPassword="RiveloPro21";
let packs = [];
let cart = JSON.parse(localStorage.getItem("cart"))||[];

// LISTEN DATABASE PACKS
db.ref('packs').on('value', snapshot => {
  packs = snapshot.val()||[];
  renderPacks();
});

// LOAD PORTADA
db.ref('portada').on('value', snap => {
  if(snap.exists()) document.getElementById("portadaImg").src = snap.val();
});

// NAV
function toggleMenu(){document.getElementById("sidebar").classList.toggle("active")}
function go(id){document.querySelectorAll('.section').forEach(s=>s.classList.remove('activeSection'));document.getElementById(id).classList.add('activeSection');document.getElementById("sidebar").classList.remove("active")}

// RENDER
function renderPacks(){
document.getElementById("packsGrid").innerHTML="";
packs.forEach((p,i)=>{document.getElementById("packsGrid").innerHTML+=`
  <div class="card">
    <img src="${p.img}">
    <h3>${p.name}</h3>
    <p>${p.price}€</p>
    <button onclick="ver(${i})">Ver</button>
    <button onclick="addCart(${i})">Añadir</button>
  </div>`});
}

function ver(i){document.getElementById("packDetail").innerHTML=`
  <h2>${packs[i].name}</h2><img src="${packs[i].img}">
  <p>${packs[i].price}€</p>
`;go('detalle');}

// CART
function addCart(i){cart.push(packs[i]);localStorage.setItem("cart",JSON.stringify(cart));renderCart();alert("Añadido")}
function removeItem(i){cart.splice(i,1);localStorage.setItem("cart",JSON.stringify(cart));renderCart();}
function renderCart(){document.getElementById("cartItems").innerHTML="";
cart.forEach((p,i)=>document.getElementById("cartItems").innerHTML+=`
  <div class="cartItem"><h3>${p.name}</h3><p>${p.price}€</p>
  <button onclick="removeItem(${i})">Eliminar</button></div>
`);}

// ADMIN
function loginAdmin(){
  if(document.getElementById("adminPass").value===adminPassword){
    document.getElementById("adminPanel").style.display="block";
    document.getElementById("portadaInput").value=document.getElementById("portadaImg").src;
    renderAdminPacks();
  } else alert("Incorrecta");
}

function savePortada(){let url=document.getElementById("portadaInput").value;db.ref('portada').set(url);alert("Guardado")}

function renderAdminPacks(){
  let html="";
  packs.forEach((p,i)=>html+=`
    <div style="border:1px solid #fff;padding:10px;margin:10px 0;">
      <input id="n${i}" value="${p.name}"><input id="pr${i}" value="${p.price}">
      <input id="im${i}" value="${p.img}">
      <button onclick="savePack(${i})">Guardar</button>
      <button onclick="delPack(${i})">Eliminar</button>
    </div>`);document.getElementById("adminPacks").innerHTML=html;
}

function savePack(i){
 packs[i].name=document.getElementById("n"+i).value;
 packs[i].price=Number(document.getElementById("pr"+i).value);
 packs[i].img=document.getElementById("im"+i).value;
 db.ref('packs').set(packs);
}

function delPack(i){packs.splice(i,1);db.ref('packs').set(packs)}
function addNewPack(){packs.push({name:"Nuevo pack",price:0,img:"",discount:0});db.ref('packs').set(packs);}
</script>

</body>
</html>
